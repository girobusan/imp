!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("preact")):"function"==typeof define&&define.amd?define(["preact"],t):"object"==typeof exports?exports.BareMDE=t(require("preact")):e.BareMDE=t(e.preact)}(self,(e=>(()=>{var t={294:(e,t,n)=>{var r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},o={manual:!0,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof i?new i(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,i;switch(n=n||{},o.util.type(t)){case"Object":if(i=o.util.objId(t),n[i])return n[i];for(var s in r={},n[i]=r,t)t.hasOwnProperty(s)&&(r[s]=e(t[s],n));return r;case"Array":return i=o.util.objId(t),n[i]?n[i]:(r=[],n[i]=r,t.forEach((function(t,o){r[o]=e(t,n)})),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var o=e.classList;if(o.contains(t))return!0;if(o.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=o.util.clone(o.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var i=(r=r||o.languages)[e],s={};for(var a in i)if(i.hasOwnProperty(a)){if(a==t)for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);n.hasOwnProperty(a)||(s[a]=i[a])}var c=r[e];return r[e]=s,o.languages.DFS(o.languages,(function(t,n){n===c&&t!=e&&(this[t]=s)})),s},DFS:function e(t,n,r,i){i=i||{};var s=o.util.objId;for(var a in t)if(t.hasOwnProperty(a)){n.call(t,a,t[a],r||a);var l=t[a],c=o.util.type(l);"Object"!==c||i[s(l)]?"Array"!==c||i[s(l)]||(i[s(l)]=!0,e(l,n,a,i)):(i[s(l)]=!0,e(l,n,null,i))}}},plugins:{},highlightAll:function(e,t){o.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),o.hooks.run("before-all-elements-highlight",r);for(var i,s=0;i=r.elements[s++];)o.highlightElement(i,!0===t,r.callback)},highlightElement:function(t,n,r){var i=o.util.getLanguage(t),s=o.languages[i];o.util.setLanguage(t,i);var a=t.parentElement;a&&"pre"===a.nodeName.toLowerCase()&&o.util.setLanguage(a,i);var l={element:t,language:i,grammar:s,code:t.textContent};function c(e){l.highlightedCode=e,o.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,o.hooks.run("after-highlight",l),o.hooks.run("complete",l),r&&r.call(l.element)}if(o.hooks.run("before-sanity-check",l),(a=l.element.parentElement)&&"pre"===a.nodeName.toLowerCase()&&!a.hasAttribute("tabindex")&&a.setAttribute("tabindex","0"),!l.code)return o.hooks.run("complete",l),void(r&&r.call(l.element));if(o.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var d=new Worker(o.filename);d.onmessage=function(e){c(e.data)},d.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(o.highlight(l.code,l.grammar,l.language));else c(o.util.encode(l.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(o.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=o.tokenize(r.code,r.grammar),o.hooks.run("after-tokenize",r),i.stringify(o.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var o=new l;return c(o,o.head,e),a(e,o,t,o.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(o)},hooks:{all:{},add:function(e,t){var n=o.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=o.hooks.all[e];if(n&&n.length)for(var r,i=0;r=n[i++];)r(t)}},Token:i};function i(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function s(e,t,n,r){e.lastIndex=t;var o=e.exec(n);if(o&&r&&o[1]){var i=o[1].length;o.index+=i,o[0]=o[0].slice(i)}return o}function a(e,t,n,r,l,u){for(var h in n)if(n.hasOwnProperty(h)&&n[h]){var p=n[h];p=Array.isArray(p)?p:[p];for(var g=0;g<p.length;++g){if(u&&u.cause==h+","+g)return;var f=p[g],v=f.inside,m=!!f.lookbehind,b=!!f.greedy,w=f.alias;if(b&&!f.pattern.global){var k=f.pattern.toString().match(/[imsuy]*$/)[0];f.pattern=RegExp(f.pattern.source,k+"g")}for(var y=f.pattern||f,x=r.next,C=l;x!==t.tail&&!(u&&C>=u.reach);C+=x.value.length,x=x.next){var E=x.value;if(t.length>e.length)return;if(!(E instanceof i)){var S,M=1;if(b){if(!(S=s(y,C,e,m))||S.index>=e.length)break;var T=S.index,P=S.index+S[0].length,A=C;for(A+=x.value.length;T>=A;)A+=(x=x.next).value.length;if(C=A-=x.value.length,x.value instanceof i)continue;for(var D=x;D!==t.tail&&(A<P||"string"==typeof D.value);D=D.next)M++,A+=D.value.length;M--,E=e.slice(C,A),S.index-=C}else if(!(S=s(y,0,E,m)))continue;T=S.index;var L=S[0],B=E.slice(0,T),I=E.slice(T+L.length),q=C+E.length;u&&q>u.reach&&(u.reach=q);var O=x.prev;if(B&&(O=c(t,O,B),C+=B.length),d(t,O,M),x=c(t,O,new i(h,v?o.tokenize(L,v):L,w,L)),I&&c(t,x,I),M>1){var Z={cause:h+","+g,reach:q};a(e,t,n,x.prev,C,Z),u&&Z.reach>u.reach&&(u.reach=Z.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var r=t.next,o={value:n,prev:t,next:r};return t.next=o,r.prev=o,e.length++,o}function d(e,t,n){for(var r=t.next,o=0;o<n&&r!==e.tail;o++)r=r.next;t.next=r,r.prev=t,e.length-=o}if(e.Prism=o,i.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach((function(t){r+=e(t,n)})),r}var i={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},s=t.alias;s&&(Array.isArray(s)?Array.prototype.push.apply(i.classes,s):i.classes.push(s)),o.hooks.run("wrap",i);var a="";for(var l in i.attributes)a+=" "+l+'="'+(i.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'"'+a+">"+i.content+"</"+i.tag+">"},!e.document)return e.addEventListener?(o.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,i=n.code,s=n.immediateClose;e.postMessage(o.highlight(i,o.languages[r],r)),s&&e.close()}),!1),o):o;var u=o.util.currentScript();function h(){o.manual||o.highlightAll()}if(u&&(o.filename=u.src,u.hasAttribute("data-manual")&&(o.manual=!0)),!o.manual){var p=document.readyState;"loading"===p||"interactive"===p&&u&&u.defer?document.addEventListener("DOMContentLoaded",h):window.requestAnimationFrame?window.requestAnimationFrame(h):window.setTimeout(h,16)}return o}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=r),void 0!==n.g&&(n.g.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};o["language-"+t]={pattern:/[\s\S]+/,inside:r.languages[t]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(e,t){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:r.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(e){return e=e.replace(/<inner>/g,(function(){return t})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+e+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,o=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,(function(){return r})),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+o+i+"(?:"+o+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+o+i+")(?:"+o+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+o+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+o+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach((function(t){["url","bold","italic","strike","code-snippet"].forEach((function(n){t!==n&&(e.languages.markdown[t].inside.content.inside[n]=e.languages.markdown[n])}))})),e.hooks.add("after-tokenize",(function(e){"markdown"!==e.language&&"md"!==e.language||function e(t){if(t&&"string"!=typeof t)for(var n=0,r=t.length;n<r;n++){var o=t[n];if("code"===o.type){var i=o.content[1],s=o.content[3];if(i&&s&&"code-language"===i.type&&"code-block"===s.type&&"string"==typeof i.content){var a=i.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),l="language-"+(a=(/[a-z][\w-]*/i.exec(a)||[""])[0].toLowerCase());s.alias?"string"==typeof s.alias?s.alias=[s.alias,l]:s.alias.push(l):s.alias=[l]}}else e(o.content)}}(e.tokens)})),e.hooks.add("wrap",(function(t){if("code-block"===t.type){for(var n="",r=0,o=t.classes.length;r<o;r++){var i=t.classes[r],c=/language-(.+)/.exec(i);if(c){n=c[1];break}}var d,u=e.languages[n];if(u)t.content=e.highlight((d=t.content,d.replace(s,"").replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,(function(e,t){var n;if("#"===(t=t.toLowerCase())[0])return n="x"===t[1]?parseInt(t.slice(2),16):Number(t.slice(1)),l(n);var r=a[t];return r||e}))),u,n);else if(n&&"none"!==n&&e.plugins.autoloader){var h="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());t.attributes.id=h,e.plugins.autoloader.loadLanguages(n,(function(){var t=document.getElementById(h);t&&(t.innerHTML=e.highlight(t.textContent,e.languages[n],n))}))}}}));var s=RegExp(e.languages.markup.tag.pattern.source,"gi"),a={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;e.languages.md=e.languages.markdown}(r)},576:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(81),o=n.n(r),i=n(645),s=n.n(i)()(o());s.push([e.id,'.BareMDE{font-family:sans-serif;display:flex;justify-items:stretch;box-sizing:border-box;flex-direction:column;box-sizing:border-box;border:none;border-radius:0px;margin:0;max-height:100%;max-width:100%;padding:0}.BareMDE.fullscreen{position:fixed;max-width:100%;max-height:100%;top:0;left:0;right:0;bottom:0;border-radius:0;border:none;z-index:1000}.BareMDE *{box-sizing:border-box}.BareMDE .toolbar{all:unset;position:relative;margin:0;box-sizing:border-box;border-radius:0;background-color:#444;color:#fff;padding:6px 48px 0px 48px;display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;flex-grow:0}.BareMDE .toolbar .divider{width:2px;flex-grow:0;margin:0;padding:0;margin-right:8px;margin-left:2px;margin-bottom:6px;background-image:linear-gradient(0deg, gray, gray 2px, transparent 2px, transparent 5px);background-size:2px 5px;background-repeat:repeat}.BareMDE .toolbar .bmde_branding{position:absolute;right:12px;font-size:14px;margin:0;padding:0}.BareMDE .toolbar .EditorMenu{position:absolute;left:6px;width:32px;height:32px;text-align:left;margin:0}.BareMDE .toolbar .EditorMenu button{display:block;border:none;width:32px;height:32px;padding-top:3px}.BareMDE .toolbar .EditorMenu button svg{display:block;pointer-events:none;user-select:none}.BareMDE .toolbar .EditorMenu .menuItems{min-width:250px;position:absolute;background-color:#bdbdbd;padding:0;margin:0;line-height:100%;border-radius:4px;overflow:hidden;box-shadow:0px 0px 24px rgba(0,0,0,.8)}.BareMDE .toolbar .EditorMenu .menuItems .Item{font-family:sans-serif;padding:6px 12px;margin:0;line-height:100%;user-select:none;cursor:pointer;border-bottom:1px solid #aaa;color:#333}.BareMDE .toolbar .EditorMenu .menuItems .Item:first-child{padding-top:8px}.BareMDE .toolbar .EditorMenu .menuItems .Item:last-child{border-bottom:none;padding-bottom:8px}.BareMDE .toolbar .EditorMenu .menuItems .Item:hover{background-color:gray;color:#fff}.BareMDE .toolbar .TButton.alerted{background-color:#ff4500;border:none}.BareMDE .toolbar .TButton.alerted:hover{border-color:#ff4500}.BareMDE .toolbar button{all:unset;box-sizing:border-box;transition:background-color .5s;appearance:none;border:1px solid rgba(0,0,0,0);border-radius:6px;width:32px;height:32px;display:inline-block;cursor:pointer;background-repeat:no-repeat;background-position:center center;background-size:24px 24px;margin:0 6px 6px 0}.BareMDE .toolbar button svg{display:block;pointer-events:none;margin:0;padding:0}.BareMDE .toolbar button.formatting{background-color:#000;border-color:#000}.BareMDE .toolbar button.formatting svg{opacity:.9}.BareMDE .toolbar button:hover{border-color:rgba(255,255,255,.6)}.BareMDE .toolbar button.on{border-color:rgba(255,255,255,.3)}.BareMDE .toolbar button:last-child{margin-right:0}.BareMDE .workArea{all:unset;box-sizing:border-box;width:100%;flex-grow:1;flex-shrink:1;display:flex;align-content:stretch;flex-direction:row;background-color:#ccc;min-height:200px;margin:0;padding:0}.BareMDE .workArea .codeJar,.BareMDE .workArea .preview{display:block;flex-grow:1;flex-shrink:1;box-sizing:border-box;max-width:100%;margin:0;scrollbar-width:thin;scrollbar-color:#444 #ddd}.BareMDE .workArea .codeJar::-webkit-scrollbar,.BareMDE .workArea .preview::-webkit-scrollbar{width:4px}.BareMDE .workArea .codeJar::-webkit-scrollbar-track,.BareMDE .workArea .preview::-webkit-scrollbar-track{background:#ddd}.BareMDE .workArea .codeJar::-webkit-scrollbar-thumb,.BareMDE .workArea .preview::-webkit-scrollbar-thumb{background-color:#444;border-radius:4px;-webkit-border-radius:4px;overflow:hidden}.BareMDE .workArea .codeJar{border-bottom-left-radius:0;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",ui-monospace,monospace;font-size:18px;line-height:150%;color:#333;flex-grow:1;padding:8px;background-color:#e4e3e2;overflow:auto;flex-basis:0}.BareMDE .workArea .preview{border-radius:0;flex-grow:1;padding:0;margin:0;width:50%;border-left:1px solid #ddd;overflow:auto;flex-basis:0;display:none}.BareMDE .workArea .preview iframe{all:unset;width:100%;display:block;border:none;margin:0;box-sizing:border-box}.BareMDE.showPreview .preview{display:block}.BareMDE.fullPreview .codeJar{display:none}.BareMDE.fullPreview .workArea .preview{display:block !important;width:100%;max-width:100%}.BareMDE.fullPreview .workArea .preview iframe{width:100%}.codeJar .token.hr{letter-spacing:.5em}.codeJar .token.important{font-weight:bold;color:darkred}.codeJar .token.title{line-height:1em;font-size:1.2em}.codeJar .token.strike .content{text-decoration:line-through}.codeJar .token.code-language{opacity:.5}.codeJar .token.code-block{color:#1990b8}',""]);const a=s},56:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(81),o=n.n(r),i=n(645),s=n.n(i)()(o());s.push([e.id,".token.comment,.token.block-comment,.token.prolog,.token.doctype,.token.cdata{color:#7d8b99}.token.punctuation{color:#5f6364}.token.property,.token.tag,.token.boolean,.token.number,.token.function-name,.token.constant,.token.symbol,.token.deleted{color:#c92c2c}.token.selector,.token.attr-name,.token.string,.token.char,.token.function,.token.builtin,.token.inserted{color:#2f9c0a}.token.operator,.token.entity,.token.url,.token.variable{color:#a67f59;background:rgba(255,255,255,.5)}.token.url .content{color:#00008b;text-decoration:underline}.token.atrule,.token.attr-value,.token.keyword,.token.class-name{color:#1990b8}.token.regex,.token.important{color:darkred}.language-css .token.string,.style .token.string{color:#a67f59;background:rgba(255,255,255,.5)}.token.important{font-weight:normal}.token.bold{font-weight:bold}.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.7}@media screen and (max-width: 767px){pre[class*=language-]:before,pre[class*=language-]:after{bottom:14px;box-shadow:none}}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}",""]);const a=s},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},609:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var r=n(379),o=n.n(r),i=n(795),s=n.n(i),a=n(569),l=n.n(a),c=n(565),d=n.n(c),u=n(216),h=n.n(u),p=n(589),g=n.n(p),f=n(576),v={};v.styleTagTransform=g(),v.setAttributes=d(),v.insert=l().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=h();o()(f.Z,v);const m=f.Z&&f.Z.locals?f.Z.locals:void 0},937:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var r=n(379),o=n.n(r),i=n(795),s=n.n(i),a=n(569),l=n.n(a),c=n(565),d=n.n(c),u=n(216),h=n.n(u),p=n(589),g=n.n(p),f=n(56),v={};v.styleTagTransform=g(),v.setAttributes=d(),v.insert=l().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=h();o()(f.Z,v);const m=f.Z&&f.Z.locals?f.Z.locals:void 0},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},s=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],d=i[c]||0,u="".concat(c," ").concat(d);i[c]=d+1;var h=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var g=o(p,r);r.byIndex=a,t.splice(a,0,{identifier:u,updater:g,references:1})}s.push(u)}return s}function o(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var l=r(e,o),c=0;c<i.length;c++){var d=n(i[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},203:t=>{"use strict";t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,exports:{}};return t[e](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nc=void 0;var o={};return(()=>{"use strict";r.r(o),r.d(o,{default:()=>p});var e=r(203),t=function(e,n,r,o){var i;n[0]=0;for(var s=1;s<n.length;s++){var a=n[s++],l=n[s]?(n[0]|=a?1:2,r[n[s++]]):n[++s];3===a?o[0]=l:4===a?o[1]=Object.assign(o[1]||{},l):5===a?(o[1]=o[1]||{})[n[++s]]=l:6===a?o[1][n[++s]]+=l+"":a?(i=e.apply(l,t(e,l,r,["",null])),o.push(i),l[0]?n[0]|=2:(n[s-2]=0,n[s]=i)):o.push(l)}return o},n=new Map;(function(e){var r=n.get(this);return r||(r=new Map,n.set(this,r)),(r=t(this,r.get(e)||(r.set(e,r=function(e){for(var t,n,r=1,o="",i="",s=[0],a=function(e){1===r&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(0,e,o):3===r&&(e||o)?(s.push(3,e,o),r=2):2===r&&"..."===o&&e?s.push(4,e,0):2===r&&o&&!e?s.push(5,0,!0,o):r>=5&&((o||!e&&5===r)&&(s.push(r,0,o,n),r=6),e&&(s.push(r,e,0,n),r=6)),o=""},l=0;l<e.length;l++){l&&(1===r&&a(),a(l));for(var c=0;c<e[l].length;c++)t=e[l][c],1===r?"<"===t?(a(),s=[s],r=3):o+=t:4===r?"--"===o&&">"===t?(r=1,o=""):o=t+o[0]:i?t===i?i="":o+=t:'"'===t||"'"===t?i=t:">"===t?(a(),r=1):r&&("="===t?(r=5,n=o,o=""):"/"===t&&(r<5||">"===e[l][c+1])?(a(),3===r&&(s=s[0]),r=s,(s=s[0]).push(2,0,r),r=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(a(),r=2):o+=t),3===r&&"!--"===o&&(r=4,s=s[0])}return a(),s}(e)),r),arguments,[])).length>1?r:r[0]}).bind(e.h);const i=window;function s(e,t,n={}){const r=Object.assign({tab:"\t",indentOn:/[({\[]$/,moveToNewLine:/^[)}\]]/,spellcheck:!1,catchTab:!0,preserveIdent:!0,addClosing:!0,history:!0,window:i},n),o=r.window,s=o.document;let a,l,c=[],d=[],u=-1,h=!1;e.setAttribute("contenteditable","plaintext-only"),e.setAttribute("spellcheck",r.spellcheck?"true":"false"),e.style.outline="none",e.style.overflowWrap="break-word",e.style.overflowY="auto",e.style.whiteSpace="pre-wrap";let p=!1;t(e),"plaintext-only"!==e.contentEditable&&(p=!0),p&&e.setAttribute("contenteditable","true");const g=L((()=>{const n=w();t(e,n),k(n)}),30);let f=!1;const v=e=>!T(e)&&!P(e)&&"Meta"!==e.key&&"Control"!==e.key&&"Alt"!==e.key&&!e.key.startsWith("Arrow"),m=L((e=>{v(e)&&(E(),f=!1)}),300),b=(t,n)=>{c.push([t,n]),e.addEventListener(t,n)};function w(){const t=O(),n={start:0,end:0,dir:void 0};let{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:a}=t;if(!r||!i)throw"error1";if(r===e&&i===e)return n.start=o>0&&e.textContent?e.textContent.length:0,n.end=a>0&&e.textContent?e.textContent.length:0,n.dir=a>=o?"->":"<-",n;if(r.nodeType===Node.ELEMENT_NODE){const e=s.createTextNode("");r.insertBefore(e,r.childNodes[o]),r=e,o=0}if(i.nodeType===Node.ELEMENT_NODE){const e=s.createTextNode("");i.insertBefore(e,i.childNodes[a]),i=e,a=0}return S(e,(e=>{if(e===r&&e===i)return n.start+=o,n.end+=a,n.dir=o<=a?"->":"<-","stop";if(e===r){if(n.start+=o,n.dir)return"stop";n.dir="->"}else if(e===i){if(n.end+=a,n.dir)return"stop";n.dir="<-"}e.nodeType===Node.TEXT_NODE&&("->"!=n.dir&&(n.start+=e.nodeValue.length),"<-"!=n.dir&&(n.end+=e.nodeValue.length))})),e.normalize(),n}function k(t){const n=O();let r,o,i=0,s=0;if(t.dir||(t.dir="->"),t.start<0&&(t.start=0),t.end<0&&(t.end=0),"<-"==t.dir){const{start:e,end:n}=t;t.start=n,t.end=e}let a=0;S(e,(e=>{if(e.nodeType!==Node.TEXT_NODE)return;const n=(e.nodeValue||"").length;if(a+n>t.start&&(r||(r=e,i=t.start-a),a+n>t.end))return o=e,s=t.end-a,"stop";a+=n})),r||(r=e,i=e.childNodes.length),o||(o=e,s=e.childNodes.length),"<-"==t.dir&&([r,i,o,s]=[o,s,r,i]),n.setBaseAndExtent(r,i,o,s)}function y(){const t=O().getRangeAt(0),n=s.createRange();return n.selectNodeContents(e),n.setEnd(t.startContainer,t.startOffset),n.toString()}function x(){const t=O().getRangeAt(0),n=s.createRange();return n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),n.toString()}function C(e){if(p&&"Enter"===e.key)if(q(e),e.stopPropagation(),""==x()){D("\n ");const e=w();e.start=--e.end,k(e)}else D("\n")}function E(){if(!h)return;const t=e.innerHTML,n=w(),r=d[u];if(r&&r.html===t&&r.pos.start===n.start&&r.pos.end===n.end)return;u++,d[u]={html:t,pos:n},d.splice(u+1);u>300&&(u=300,d.splice(0,1))}function S(e,t){const n=[];e.firstChild&&n.push(e.firstChild);let r=n.pop();for(;r&&"stop"!==t(r);)r.nextSibling&&n.push(r.nextSibling),r.firstChild&&n.push(r.firstChild),r=n.pop()}function M(e){return e.metaKey||e.ctrlKey}function T(e){return M(e)&&!e.shiftKey&&"Z"===A(e)}function P(e){return M(e)&&e.shiftKey&&"Z"===A(e)}function A(e){let t=e.key||e.keyCode||e.which;if(t)return("string"==typeof t?t:String.fromCharCode(t)).toUpperCase()}function D(e){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),s.execCommand("insertHTML",!1,e)}function L(e,t){let n=0;return(...r)=>{clearTimeout(n),n=o.setTimeout((()=>e(...r)),t)}}function B(e){let t=e.length-1;for(;t>=0&&"\n"!==e[t];)t--;t++;let n=t;for(;n<e.length&&/[ \t]/.test(e[n]);)n++;return[e.substring(t,n)||"",t,n]}function I(){return e.textContent||""}function q(e){e.preventDefault()}function O(){var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.nodeType)==Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.getSelection():o.getSelection()}return b("keydown",(t=>{t.defaultPrevented||(l=I(),r.preserveIdent?function(e){if("Enter"===e.key){const t=y(),n=x();let[o]=B(t),i=o;if(r.indentOn.test(t)&&(i+=r.tab),i.length>0?(q(e),e.stopPropagation(),D("\n"+i)):C(e),i!==o&&r.moveToNewLine.test(n)){const e=w();D("\n"+o),k(e)}}}(t):C(t),r.catchTab&&function(e){if("Tab"===e.key)if(q(e),e.shiftKey){const e=y();let[t,n]=B(e);if(t.length>0){const e=w(),o=Math.min(r.tab.length,t.length);k({start:n,end:n+o}),s.execCommand("delete"),e.start-=o,e.end-=o,k(e)}}else D(r.tab)}(t),r.addClosing&&function(e){const t="([{'\"",n=")]}'\"",r=x(),o=y(),i="\\"===o.substr(o.length-1),s=r.substr(0,1);if(n.includes(e.key)&&!i&&s===e.key){const t=w();q(e),t.start=++t.end,k(t)}else if(t.includes(e.key)&&!i&&("\"'".includes(e.key)||[""," ","\n"].includes(s))){q(e);const r=w(),o=r.start==r.end?"":O().toString();D(e.key+o+n[t.indexOf(e.key)]),r.start++,r.end++,k(r)}}(t),r.history&&(!function(t){if(T(t)){q(t),u--;const n=d[u];n&&(e.innerHTML=n.html,k(n.pos)),u<0&&(u=0)}if(P(t)){q(t),u++;const n=d[u];n&&(e.innerHTML=n.html,k(n.pos)),u>=d.length&&u--}}(t),v(t)&&!f&&(E(),f=!0)),p&&!function(e){return M(e)&&"C"===A(e)}(t)&&k(w()))})),b("keyup",(e=>{e.defaultPrevented||e.isComposing||(l!==I()&&g(),m(e),a&&a(I()))})),b("focus",(e=>{h=!0})),b("blur",(e=>{h=!1})),b("paste",(n=>{E(),function(n){q(n);const r=(n.originalEvent||n).clipboardData.getData("text/plain").replace(/\r/g,""),o=w();D(r),t(e),k({start:Math.min(o.start,o.end)+r.length,end:Math.min(o.start,o.end)+r.length,dir:"<-"})}(n),E(),a&&a(I())})),{updateOptions(e){Object.assign(r,e)},updateCode(n){e.textContent=n,t(e)},onUpdate(e){a=e},toString:I,save:w,restore:k,recordHistory:E,destroy(){for(let[t,n]of c)e.removeEventListener(t,n)}}}class a extends e.Component{constructor(e){super(e)}render(){return this.props.condition?this.props.children:""}}class l extends e.Component{constructor(e){super(e),this.state={open:!1},this.handleItem=this.handleItem.bind(this),this.doClose=this.doClose.bind(this)}handleItem(e){this.props.items[e].handler()}doClose(){this.setState({open:!1})}componentDidUpdate(e,t){return!0===this.state.open&&!1===t.open&&window.addEventListener("click",this.doClose),!1===this.state.open&&!0===t.open&&window.removeEventListener("click",this.doClose),!0}render(){if(!this.props.items||0==this.props.items.length)return"";const t=this;return(0,e.h)("div",{class:"EditorMenu"},(0,e.h)("button",{dangerouslySetInnerHTML:{__html:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z" fill="white"/></svg>\n'},title:this.props.title||"Menu",onClick:e=>{e.stopPropagation(),e.preventDefault(),this.setState({open:!this.state.open})}}),(0,e.h)(a,{condition:this.state.open},(0,e.h)("div",{class:"menuItems",style:"z-index:"+this.props.zIndex},this.props.items.map(((n,r)=>(0,e.h)("div",{class:"Item",onMouseDown:()=>t.handleItem(r),dangerouslySetInnerHTML:{__html:n.label}}))))))}}function c({svg:t,svgOff:n,isOn:r,title:o,onClick:i,customClass:s}){return n=n||t,(0,e.h)("button",{class:"TButton \n   "+(r?"on":"off")+"\n   "+(s||"")+"\n   ",style:{width:"32px",height:"32px",display:"inline-block",boxSizing:"border-box",padding:"3px",userSelect:"none",borderWidth:"1px"},dangerouslySetInnerHTML:{__html:r?t:n},title:o||"",onClick:"function"==typeof i?i:()=>console.log("button clicked")})}l.defaultProps={zIndex:1100};r(937),r(609);const d=r(294),u=navigator.platform.toUpperCase().indexOf("MAC")>=0,h=u?"âŒ˜":"Ctrl";class p extends e.Component{constructor(t){super(t),this.previewThrottled=!1,this.previewInProcess=!1,this.scrollThrottled=!1,this.saveThrottled=!1,this.componentContainer=(0,e.createRef)(),this.codeJarContainer=(0,e.createRef)(),this.previewContainer=(0,e.createRef)(),this.previewFrame=(0,e.createRef)(),this.state={fullscreen:t.fullscreen,showPreview:t.showPreview,fullPreview:!1,content:t.content,spellCheck:t.spellCheck,syncScroll:!0,modified:t.modified},this.currentContent=this.props.content,this.contentId=this.props.contentId,this.surroundSelection=this.surroundSelection.bind(this),this.handleKey=this.handleKey.bind(this),this.togglePreview=this.togglePreview.bind(this),this.toggleFullPreview=this.toggleFullPreview.bind(this),this.toggleFullscreen=this.toggleFullscreen.bind(this),this.toggleSpellcheck=this.toggleSpellcheck.bind(this),this.toggleSyncScroll=this.toggleSyncScroll.bind(this),this.doPreview=this.doPreview.bind(this),this.saveFile=this.saveFile.bind(this),this.onCodeUpdate=this.onCodeUpdate.bind(this),this.editorCommands={bold:()=>{this.surroundSelection("**","**")},italic:()=>{this.surroundSelection("_","_")},strike:()=>{this.surroundSelection("~~","~~")},link:()=>{let e=prompt("Enter URL:","https://");this.surroundSelection("[","]("+(e||"")+")")}},t.controls&&(t.controls.doPreview=this.doPreview,t.controls.syncScroll=()=>this.state.syncScroll&&this.syncPreviewScroll())}shouldComponentUpdate(){this.pos=this.jar.save()}componentDidUpdate(e,t){this.currentContent!==this.props.content||this.props.contentId!==this.contentId?(this.jar.updateCode(this.props.content),this.currentContent=this.props.content,this.contentId=this.props.contentId):this.pos&&this.jar.restore(this.pos),this.doPreview()}componentWillUnmount(){window.removeEventListener("resize",this.doPreview)}onCodeUpdate(){this.pos=this.jar.save(),"function"==typeof this.props.onUpdate&&this.props.onUpdate(this.jar.toString()),this.doPreview()}componentDidMount(){this.jar=s(this.codeJarContainer.current,(e=>d.highlightElement(e,!1,null)),{preserveIdent:!0,spellcheck:this.state.spellCheck}),this.jar.updateCode(this.props.content),this.doPreview(),this.jar.onUpdate(this.onCodeUpdate),this.codeJarContainer.current.focus(),window.addEventListener("resize",this.doPreview),this.codeJarContainer.current.addEventListener("keydown",this.handleKey)}fireCommand(e){this.editorCommands[e]()}handleKey(e){(u?e.metaKey:e.ctrlKey)&&(-1!=["KeyB","KeyI","KeyL","KeyD"].indexOf(e.code)&&(e.preventDefault(),e.stopPropagation()),"KeyB"===e.code&&this.fireCommand("bold"),"KeyI"===e.code&&this.fireCommand("italic"),"KeyL"===e.code&&this.fireCommand("link"),"KeyD"===e.code&&this.fireCommand("strike"))}insertAt(e,t,n){return e.substring(0,t)+n+e.substring(t)}surroundSelection(e,t){const n=window.getSelection();if(n.isCollapsed)return void console.error("collapsed selection");const r=n.getRangeAt(0);if(r){if(this.codeJarContainer.current.contains(r.commonAncestorContainer)||this.codeJarContainer.current===r.commonAncestorContainer){const n=this.jar.save();"->"===n.dir?n.end+=t.length+e.length:n.start+=t.length+e.length;const o=r.startContainer,i=r.startOffset,s=r.endContainer,a=r.endOffset;return s.textContent=this.insertAt(s.textContent,a,t),o.textContent=this.insertAt(o.textContent,i,e),this.codeJarContainer.current.focus(),this.jar.updateCode(this.jar.toString()),this.jar.restore(n),this.doPreview(!0),void this.onCodeUpdate()}console.error("wrong selection")}}async syncPreviewScroll(e){if(!this.state.syncScroll&&!e)return;if(!this.state.showPreview)return;if(this.scrollThrottled)return;this.scrollThrottled=!0;const t=()=>{const e=this.previewContainer.current.scrollHeight,t=this.codeJarContainer.current.scrollHeight,n=this.codeJarContainer.current.scrollTop,r=this.previewContainer.current.getBoundingClientRect().height;if(e<=r||t<=r)return;const o=(e-r)*(n/(t-r));this.previewContainer.current.scrollTo({top:o,left:0,behavior:"smooth"})};t(),window.setTimeout((()=>{this.scrollThrottled=!1,t()}),50)}toggleSpellcheck(){this.jar.updateOptions({spellcheck:!this.state.spellCheck}),this.codeJarContainer.current.spellcheck=!this.state.spellCheck,this.setState({spellCheck:!this.state.spellCheck})}toggleFullscreen(){const e=!this.state.fullscreen;e?("function"==typeof this.props.onEnterFullscreen&&this.props.onEnterFullscreen(),this.componentContainer.current.style.zIndex=this.props.fullscreenZIndex,this.props.trueFullscreen&&document.fullscreenEnabled&&this.componentContainer.current.requestFullscreen()):("function"==typeof this.props.onExitFullscreen&&this.props.onExitFullscreen(),this.componentContainer.current.style.zIndex="unset",this.props.trueFullscreen&&document.fullscreenEnabled&&document.exitFullscreen());try{this.setState({fullscreen:e})}catch(e){console.error("Error found!",e)}}togglePreview(){const e={showPreview:!this.state.showPreview};this.state.fullPreview?this.setState({fullPreview:!1}):this.setState(e)}toggleFullPreview(){if("function"==typeof this.props.externalPreview)return this.props.externalPreview();const e=!this.state.fullPreview;this.setState({fullPreview:e})}toggleSyncScroll(){const e={syncScroll:!this.state.syncScroll};this.setState(e)}saveFile(){this.saveThrottled||"function"==typeof this.props.save&&(this.props.save(this.jar.toString()),this.saveThrottled=!0,window.setTimeout((()=>{this.saveThrottled=!1}),200))}async doPreview(e){if(!this.state.showPreview&&!e)return;if(this.state.previewInProcess)return;this.previewFrame.current||console.log("no iframe");const t=()=>{if(this.previewInProcess=!0,!this.previewFrame.current.contentWindow)return;const e=this.props.render(this.jar.toString());return Promise.resolve(e).then((e=>{const t=this.previewFrame.current.contentWindow.document;if(t.open(),t.write(e),t.close(),"function"==typeof this.props.imageRewriter){t.querySelectorAll("*[src]").forEach((e=>{e.getAttribute("src").match(/^http(s)?:/)||(e.src=this.props.imageRewriter(e.getAttribute("src")))}))}t.addEventListener("DOMContentLoaded",(()=>{if(!t.body)return;const e=Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.documentElement.offsetHeight);this.previewFrame.current.style.height=e+"px",this.syncPreviewScroll()}))})).finally((()=>this.previewInProcess=!1))};this.previewThrottled||(this.previewThrottled=!0,await t(),window.setTimeout((()=>{this.previewThrottled=!1,!this.previewInProcess&&t()}),300))}render(){return this.pos&&document.activeElement===this.codeJarContainer.current&&(this.jar.restore(this.pos),this.pos=null),(0,e.h)("div",{class:"BareMDE \n       "+(this.state.fullscreen&&"fullscreen")+"\n       "+(this.state.showPreview&&"showPreview")+"\n       "+(this.state.fullPreview&&"fullPreview")+"\n       ",ref:this.componentContainer,style:"max-height:"+(this.state.fullscreen?"100%":this.props.maxHeight)+";z-index:"+(this.state.fullscreen?this.props.fullscreenZIndex:"initial")},(0,e.h)("div",{class:"toolbar top \n       "+(this.state.fullscreen?"fullscreen":"windowed")+"\n      "},(0,e.h)(l,{title:this.props.menuTitle||"Additional functions",zIndex:this.state.fullscreen?this.props.fullscreenZIndex+100:"initial",items:this.props.menuItems}),(0,e.h)("div",{class:"bmde_branding",dangerouslySetInnerHTML:{__html:this.props.branding}}),(0,e.h)(c,{isOn:!0,customClass:"formatting",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" ><path fill="white" d="M272-200v-560h221q65 0 120 40t55 111q0 51-23 78.5T602-491q25 11 55.5 41t30.5 90q0 89-65 124.5T501-200H272Zm121-112h104q48 0 58.5-24.5T566-372q0-11-10.5-35.5T494-432H393v120Zm0-228h93q33 0 48-17t15-38q0-24-17-39t-44-15h-95v109Z"/></svg>\n',title:"Bold "+h+"+B",onClick:()=>this.fireCommand("bold")}),(0,e.h)(c,{customClass:"formatting",isOn:!0,svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" ><path fill="white" d="M200-200v-100h160l120-360H320v-100h400v100H580L460-300h140v100H200Z"/></svg>\n',title:"Italic "+h+"+I",onClick:()=>this.fireCommand("italic")}),(0,e.h)(c,{customClass:"formatting",isOn:!0,svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" ><path fill="white" d="M80-400v-80h800v80H80Zm340-160v-120H200v-120h560v120H540v120H420Zm0 400v-160h120v160H420Z"/></svg>\n',title:"Strikethrough "+h+"+D",onClick:()=>this.fireCommand("strike")}),(0,e.h)(c,{customClass:"formatting",isOn:!0,svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" ><path fill="white" d="M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z"/></svg>\n',title:"Link "+h+"+L",onClick:()=>this.fireCommand("link")}),(0,e.h)("div",{class:"divider"}),(0,e.h)(c,{isOn:this.state.showPreview,svg:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h14q.825 0 1.413.587Q21 4.175 21 5v14q0 .825-.587 1.413Q19.825 21 19 21Zm0-2h14V7H5v12Zm7-2q-2.05 0-3.662-1.113Q6.725 14.775 6 13q.725-1.775 2.338-2.887Q9.95 9 12 9t3.663 1.113Q17.275 11.225 18 13q-.725 1.775-2.337 2.887Q14.05 17 12 17Zm0-1.5q1.4 0 2.55-.663 1.15-.662 1.8-1.837-.65-1.175-1.8-1.838Q13.4 10.5 12 10.5t-2.55.662Q8.3 11.825 7.65 13q.65 1.175 1.8 1.837 1.15.663 2.55.663Zm0-1q-.625 0-1.062-.438Q10.5 13.625 10.5 13t.438-1.062Q11.375 11.5 12 11.5t1.062.438q.438.437.438 1.062t-.438 1.062q-.437.438-1.062.438Z"/></svg>\n',title:"Toggle Preview",onClick:this.togglePreview}),(0,e.h)(c,{isOn:this.state.fullPreview,svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n<path d="m12 16c1.25 0 2.3127-0.43733 3.188-1.312 0.87467-0.87533 1.312-1.938 1.312-3.188s-0.43733-2.3127-1.312-3.188c-0.87533-0.87467-1.938-1.312-3.188-1.312s-2.3127 0.43733-3.188 1.312c-0.87467 0.87533-1.312 1.938-1.312 3.188s0.43733 2.3127 1.312 3.188c0.87533 0.87467 1.938 1.312 3.188 1.312zm0 3c-2.4333 0-4.65-0.67933-6.65-2.038-2-1.358-3.45-3.1787-4.35-5.462 0.9-2.2833 2.35-4.1043 4.35-5.463 2-1.358 4.2167-2.037 6.65-2.037 2.4333 0 4.65 0.679 6.65 2.037 2 1.3587 3.45 3.1797 4.35 5.463-0.9 2.2833-2.35 4.104-4.35 5.462-2 1.3587-4.2167 2.038-6.65 2.038zm0-2c1.8833 0 3.6127-0.496 5.188-1.488 1.5747-0.99133 2.7787-2.3287 3.612-4.012-0.83333-1.6833-2.0373-3.021-3.612-4.013-1.5753-0.99133-3.3047-1.487-5.188-1.487s-3.6127 0.49567-5.188 1.487c-1.5747 0.992-2.7787 2.3297-3.612 4.013 0.83333 1.6833 2.0373 3.0207 3.612 4.012 1.5753 0.992 3.3047 1.488 5.188 1.488z" fill="#fff"/>\n</svg>\n',svgOff:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M12 16q1.875 0 3.188-1.312Q16.5 13.375 16.5 11.5q0-1.875-1.312-3.188Q13.875 7 12 7q-1.875 0-3.188 1.312Q7.5 9.625 7.5 11.5q0 1.875 1.312 3.188Q10.125 16 12 16Zm0-1.8q-1.125 0-1.912-.788Q9.3 12.625 9.3 11.5t.788-1.913Q10.875 8.8 12 8.8t1.913.787q.787.788.787 1.913t-.787 1.912q-.788.788-1.913.788Zm0 4.8q-3.65 0-6.65-2.038-3-2.037-4.35-5.462 1.35-3.425 4.35-5.463Q8.35 4 12 4q3.65 0 6.65 2.037 3 2.038 4.35 5.463-1.35 3.425-4.35 5.462Q15.65 19 12 19Zm0-7.5Zm0 5.5q2.825 0 5.188-1.488Q19.55 14.025 20.8 11.5q-1.25-2.525-3.612-4.013Q14.825 6 12 6 9.175 6 6.812 7.487 4.45 8.975 3.2 11.5q1.25 2.525 3.612 4.012Q9.175 17 12 17Z"/></svg>\n',title:this.props.externalPreviewTitle||"Full width preview",onClick:this.toggleFullPreview}),(0,e.h)(c,{isOn:this.state.fullscreen,svg:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M8 19v-3H5v-2h5v5Zm6 0v-5h5v2h-3v3Zm-9-9V8h3V5h2v5Zm9 0V5h2v3h3v2Z"/></svg>\n',svgOff:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M5 19v-5h2v3h3v2Zm0-9V5h5v2H7v3Zm9 9v-2h3v-3h2v5Zm3-9V7h-3V5h5v5Z"/></svg>\n',title:this.state.fullscreen?"Exit fullscreen":"Go fullscreen",onClick:this.toggleFullscreen}),(0,e.h)(c,{isOn:this.state.spellCheck,svg:'<svg version="1.1" viewBox="0 0 24 24" width="24" height="24" xmlns="http://www.w3.org/2000/svg"> <path d="m14.1 22-4.25-4.25 1.4-1.4 2.85 2.85 5.65-5.65 1.4 1.4z" fill="orangered"/>\n<path d="m7.05 10.8h3.9l-1.9-5.4h-0.1zm-4.05 5.2 4.85-13h2.35l4.85 13h-2.3l-1.15-3.3h-5.25l-1.15 3.3z" fill="#fff"/>\n</svg>\n',svgOff:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="m14.1 22-4.25-4.25 1.4-1.4 2.85 2.85 5.65-5.65 1.4 1.4ZM3 16 7.85 3h2.35l4.85 13h-2.3l-1.15-3.3H6.35L5.2 16Zm4.05-5.2h3.9l-1.9-5.4h-.1Z"/></svg>\n',title:this.state.spellCheck?"Turn spellchek off":"Turn spellcheck on",onClick:this.toggleSpellcheck}),(0,e.h)(c,{isOn:this.state.syncScroll,svg:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.5 8.5L7 7L12 2L17 7L15.5 8.5L13 6V18.5L15.5 16L17 17.5L12 22.5L7 17.5L8.5 16L11 18.5V6L8.5 8.5Z" fill="white"/>\n</svg>\n',svgOff:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="#ffffff" d="M8 13V5.825L5.425 8.4 4 7l5-5 5 5-1.425 1.4L10 5.825V13Zm7 9-5-5 1.425-1.4L14 18.175V11h2v7.175l2.575-2.575L20 17Z"/></svg>\n',title:this.state.syncScroll?"Turn scroll sync off":"Turn scroll sync on",onClick:this.toggleSyncScroll}),(0,e.h)(c,{svg:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path fill="white" d="M5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h12l4 4v5.4l-2 2V7.825L16.175 5H5v14h9.4l-2 2Zm7-3q1.25 0 2.125-.875T15 15q0-1.25-.875-2.125T12 12q-1.25 0-2.125.875T9 15q0 1.25.875 2.125T12 18Zm-6-8h9V6H6Zm9 13v-1.775l5-4.975 1.75 1.775L16.775 23Zm7.4-5.65-1.775-1.75.85-.85q.15-.15.362-.15.213 0 .363.15l1.05 1.05q.15.15.15.35 0 .2-.15.35ZM5 19V5v9.4Z"/></svg>\n',title:"Save html file",onClick:this.saveFile,customClass:this.props.modified?"alerted":""})),(0,e.h)("div",{class:"workArea"},(0,e.h)("div",{class:"codeJar language-md",ref:this.codeJarContainer,onscroll:()=>this.syncPreviewScroll()}),(0,e.h)("div",{class:"preview "+this.props.previewClass,ref:this.previewContainer},(0,e.h)("iframe",{style:"min-height:100%",ref:this.previewFrame}))))}}p.defaultProps={render:e=>`<html><head></head><body><div style='color:navyblue'>${e}</div></body></html>`,onUpdate:()=>console.log("Editor updated"),save:e=>console.log("Dummy save function",e.substring(0,200)+"..."),content:"write here",contentId:null,modified:!1,indicateChanges:!0,previewClass:"markdownPreviewArea",fullscreen:!1,onEnterFullscreen:()=>document.body.style.overflow="hidden",onExitFullscreen:()=>document.body.style.overflow="initial",trueFullscreen:!1,showPreview:!0,spellCheck:!0,fullscreenZIndex:1001,externalPreview:null,externalPreviewTitle:null,imageRewriter:null,maxHeight:"400px",branding:"0.2.2",controls:null,disable:[]}})(),o})()));